function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("@tanstack/react-query"),r=e(require("axios")),a=require("react"),n=e(a),s=require("@radix-ui/react-avatar"),l=require("clsx"),i=require("tailwind-merge"),o=require("@radix-ui/react-slot"),c=require("class-variance-authority"),d=require("@radix-ui/react-scroll-area"),u=require("lucide-react");function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}function f(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}function v(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.twMerge(l.clsx(t))}var g=["className"],b=["className"];function h(e){var t=e.className,r=f(e,g);return a.createElement(s.Root,m({"data-slot":"avatar",className:v("relative flex size-8 shrink-0 overflow-hidden rounded-full",t)},r))}function p(e){var t=e.className,r=f(e,b);return a.createElement(s.Fallback,m({"data-slot":"avatar-fallback",className:v("bg-muted flex size-full items-center justify-center rounded-full",t)},r))}var x=["className","variant","size","asChild"],N=c.cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function w(e){var t=e.className,r=e.variant,n=e.size,s=e.asChild,l=void 0!==s&&s,i=f(e,x);return a.createElement(l?o.Slot:"button",m({"data-slot":"button",className:v(N({variant:r,size:n,className:t}))},i))}var y=["className"];function E(e){var t=e.className,r=f(e,y);return a.createElement("div",m({"data-slot":"card",className:v("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border shadow-sm",t)},r))}var k=["className","type"];function z(e){var t=e.className,r=e.type,n=f(e,k);return a.createElement("input",m({type:r,"data-slot":"input",className:v("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t)},n))}var C=["className","children"],j=["className","orientation"];function S(e){var t=e.className,r=e.children,n=f(e,C);return a.createElement(d.Root,m({"data-slot":"scroll-area",className:v("relative",t)},n),a.createElement(d.Viewport,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1"},r),a.createElement(D,null),a.createElement(d.Corner,null))}function D(e){var t=e.className,r=e.orientation,n=void 0===r?"vertical":r,s=f(e,j);return a.createElement(d.ScrollAreaScrollbar,m({"data-slot":"scroll-area-scrollbar",orientation:n,className:v("flex touch-none p-px transition-colors select-none","vertical"===n&&"h-full w-2.5 border-l border-l-transparent","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent",t)},s),a.createElement(d.ScrollAreaThumb,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"}))}exports.ChatWidget=function(e){var t=e.initialMessages,r=void 0===t?[]:t,s=e.placeholder,l=void 0===s?"Digite sua mensagem...":s,i=e.onSendMessage,o=e.position,c=void 0===o?"left":o,d=e.primaryColor,m=void 0===d?"hsl(var(--primary))":d,f=e.title,g=void 0===f?"Assistente Virtual":f,b=e.welcomeMessage,x=void 0===b?"Olá! Como posso ajudá-lo hoje?":b,N=e.onToggle,y=e.defaultOpen,k=e.className,C=a.useState(void 0!==y&&y),j=C[0],D=C[1],q=a.useState(r.length>0?r:[{id:"1",role:"bot",content:x,createdAt:new Date}]),P=q[0],O=q[1],A=a.useState(""),M=A[0],U=A[1],I=a.useState(!1),R=I[0],V=I[1],B=a.useRef(null),T=a.useRef(null);a.useEffect(function(){var e;null===(e=B.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[P]),a.useEffect(function(){j&&T.current&&T.current.focus()},[j]);var _=function(){var e=!j;D(e),null==N||N(e)},F=function(){try{if(!M.trim())return Promise.resolve();var e={id:Date.now().toString(),role:"user",content:M,createdAt:new Date};return O(function(t){return[].concat(t,[e])}),U(""),null==i||i(M),V(!0),setTimeout(function(){var e={id:(Date.now()+1).toString(),role:"bot",content:'Obrigado pela sua mensagem: "'+M+'". Como posso ajudá-lo mais?',createdAt:new Date};O(function(t){return[].concat(t,[e])}),V(!1)},1500),Promise.resolve()}catch(e){return Promise.reject(e)}};return n.createElement("div",{className:v("fixed z-50",k)},n.createElement("div",{className:v("fixed",{left:"left-6 bottom-6",right:"right-6 bottom-6"}[c])},n.createElement(w,{onClick:_,size:"lg",className:v("h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110",j&&"rotate-180"),style:{backgroundColor:m}},n.createElement(j?u.X:u.MessageCircle,{className:"h-6 w-6"}))),j&&n.createElement("div",{className:v("fixed",{left:"left-6 bottom-24",right:"right-6 bottom-24"}[c])},n.createElement(E,{className:"w-80 h-96 shadow-2xl animate-in slide-in-from-bottom-5 duration-300"},n.createElement("div",{className:"flex items-center justify-between p-4 border-b rounded-t-lg text-white",style:{backgroundColor:m}},n.createElement("div",{className:"flex items-center gap-2"},n.createElement(h,{className:"h-8 w-8"},n.createElement(p,{className:"bg-white/20"},n.createElement(u.Bot,{className:"h-4 w-4"}))),n.createElement("h3",{className:"font-semibold text-sm"},g)),n.createElement(w,{variant:"ghost",size:"sm",onClick:_,className:"text-white hover:bg-white/20 h-8 w-8 p-0"},n.createElement(u.X,{className:"h-4 w-4"}))),n.createElement(S,{className:"flex-1 p-4 h-53"},n.createElement("div",{className:"space-y-4"},P.map(function(e){return n.createElement("div",{key:e.id,className:v("flex gap-2","user"===e.role?"justify-end":"justify-start")},"bot"===e.role&&n.createElement(h,{className:"h-6 w-6 mt-1"},n.createElement(p,{className:"bg-muted"},n.createElement(u.Bot,{className:"h-3 w-3"}))),n.createElement("div",{className:v("max-w-[70%] rounded-lg px-3 py-2 text-sm","user"===e.role?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground")},e.content),"user"===e.role&&n.createElement(h,{className:"h-6 w-6 mt-1"},n.createElement(p,{className:"bg-primary"},n.createElement(u.User,{className:"h-3 w-3 text-primary-foreground"}))))}),R&&n.createElement("div",{className:"flex gap-2 justify-start"},n.createElement(h,{className:"h-6 w-6 mt-1"},n.createElement(p,{className:"bg-muted"},n.createElement(u.Bot,{className:"h-3 w-3"}))),n.createElement("div",{className:"bg-muted rounded-lg px-3 py-2"},n.createElement("div",{className:"flex gap-1"},n.createElement("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),n.createElement("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.createElement("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})))),n.createElement("div",{ref:B}))),n.createElement("div",{className:"p-4 border-t"},n.createElement("div",{className:"flex gap-2"},n.createElement(z,{ref:T,value:M,onChange:function(e){return U(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),F())},placeholder:l,className:"flex-1"}),n.createElement(w,{onClick:F,size:"sm",disabled:!M.trim(),style:{backgroundColor:m}},n.createElement(u.Send,{className:"h-4 w-4"})))))))},exports.useChatbot=function(){var e=a.useState([]),n=e[0],s=e[1],l=t.useMutation({mutationFn:function(e){try{return Promise.resolve(r.post("/api/chatbot",{message:e})).then(function(e){return e.data})}catch(e){return Promise.reject(e)}},onSuccess:function(e,t){s(function(e){return[].concat(e,[{id:crypto.randomUUID(),sender:"user",text:t}])}),s(function(r){return[].concat(r,[{id:crypto.randomUUID(),sender:"user",text:t},{id:crypto.randomUUID(),sender:"bot",text:e.reply}])})}});return{messages:n,sendMessage:function(e){e.trim()&&l.mutate(e)},isLoading:l.isPending}};
//# sourceMappingURL=index.js.map
