!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@tanstack/react-query"),require("axios"),require("react"),require("@radix-ui/react-avatar"),require("clsx"),require("tailwind-merge"),require("@radix-ui/react-slot"),require("class-variance-authority"),require("@radix-ui/react-scroll-area"),require("lucide-react")):"function"==typeof define&&define.amd?define(["exports","@tanstack/react-query","axios","react","@radix-ui/react-avatar","clsx","tailwind-merge","@radix-ui/react-slot","class-variance-authority","@radix-ui/react-scroll-area","lucide-react"],t):t((e=e||self).helloCliChatbotWidget={},e.reactQuery,e.axios,e.react,e.AvatarPrimitive,e.clsx,e.tailwindMerge,e.reactSlot,e.classVarianceAuthority,e.ScrollAreaPrimitive,e.lucideReact)}(this,function(e,t,r,a,n,s,i,l,o,c,d){r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var u="default"in a?a.default:a;function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(null,arguments)}function f(e,t){if(null==e)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;r[a]=e[a]}return r}function v(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.twMerge(s.clsx(t))}var g=["className"],b=["className"];function h(e){var t=e.className,r=f(e,g);return a.createElement(n.Root,m({"data-slot":"avatar",className:v("relative flex size-8 shrink-0 overflow-hidden rounded-full",t)},r))}function p(e){var t=e.className,r=f(e,b);return a.createElement(n.Fallback,m({"data-slot":"avatar-fallback",className:v("bg-muted flex size-full items-center justify-center rounded-full",t)},r))}var x=["className","variant","size","asChild"],y=o.cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function N(e){var t=e.className,r=e.variant,n=e.size,s=e.asChild,i=void 0!==s&&s,o=f(e,x);return a.createElement(i?l.Slot:"button",m({"data-slot":"button",className:v(y({variant:r,size:n,className:t}))},o))}var w=["className"];function E(e){var t=e.className,r=f(e,w);return a.createElement("div",m({"data-slot":"card",className:v("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border shadow-sm",t)},r))}var k=["className","type"];function C(e){var t=e.className,r=e.type,n=f(e,k);return a.createElement("input",m({type:r,"data-slot":"input",className:v("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t)},n))}var z=["className","children"],S=["className","orientation"];function j(e){var t=e.className,r=e.children,n=f(e,z);return a.createElement(c.Root,m({"data-slot":"scroll-area",className:v("relative",t)},n),a.createElement(c.Viewport,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1"},r),a.createElement(q,null),a.createElement(c.Corner,null))}function q(e){var t=e.className,r=e.orientation,n=void 0===r?"vertical":r,s=f(e,S);return a.createElement(c.ScrollAreaScrollbar,m({"data-slot":"scroll-area-scrollbar",orientation:n,className:v("flex touch-none p-px transition-colors select-none","vertical"===n&&"h-full w-2.5 border-l border-l-transparent","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent",t)},s),a.createElement(c.ScrollAreaThumb,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"}))}e.ChatWidget=function(e){var t=e.initialMessages,r=void 0===t?[]:t,n=e.placeholder,s=void 0===n?"Digite sua mensagem...":n,i=e.onSendMessage,l=e.position,o=void 0===l?"left":l,c=e.primaryColor,m=void 0===c?"hsl(var(--primary))":c,f=e.title,g=void 0===f?"Assistente Virtual":f,b=e.welcomeMessage,x=void 0===b?"Olá! Como posso ajudá-lo hoje?":b,y=e.onToggle,w=e.defaultOpen,k=e.className,z=a.useState(void 0!==w&&w),S=z[0],q=z[1],D=a.useState(r.length>0?r:[{id:"1",role:"bot",content:x,createdAt:new Date}]),P=D[0],A=D[1],O=a.useState(""),M=O[0],U=O[1],R=a.useState(!1),V=R[0],I=R[1],B=a.useRef(null),T=a.useRef(null);a.useEffect(function(){var e;null===(e=B.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[P]),a.useEffect(function(){S&&T.current&&T.current.focus()},[S]);var _=function(){var e=!S;q(e),null==y||y(e)},F=function(){try{if(!M.trim())return Promise.resolve();var e={id:Date.now().toString(),role:"user",content:M,createdAt:new Date};return A(function(t){return[].concat(t,[e])}),U(""),null==i||i(M),I(!0),setTimeout(function(){var e={id:(Date.now()+1).toString(),role:"bot",content:'Obrigado pela sua mensagem: "'+M+'". Como posso ajudá-lo mais?',createdAt:new Date};A(function(t){return[].concat(t,[e])}),I(!1)},1500),Promise.resolve()}catch(e){return Promise.reject(e)}};return u.createElement("div",{className:v("fixed z-50",k)},u.createElement("div",{className:v("fixed",{left:"left-6 bottom-6",right:"right-6 bottom-6"}[o])},u.createElement(N,{onClick:_,size:"lg",className:v("h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110",S&&"rotate-180"),style:{backgroundColor:m}},u.createElement(S?d.X:d.MessageCircle,{className:"h-6 w-6"}))),S&&u.createElement("div",{className:v("fixed",{left:"left-6 bottom-24",right:"right-6 bottom-24"}[o])},u.createElement(E,{className:"w-80 h-96 shadow-2xl animate-in slide-in-from-bottom-5 duration-300"},u.createElement("div",{className:"flex items-center justify-between p-4 border-b rounded-t-lg text-white",style:{backgroundColor:m}},u.createElement("div",{className:"flex items-center gap-2"},u.createElement(h,{className:"h-8 w-8"},u.createElement(p,{className:"bg-white/20"},u.createElement(d.Bot,{className:"h-4 w-4"}))),u.createElement("h3",{className:"font-semibold text-sm"},g)),u.createElement(N,{variant:"ghost",size:"sm",onClick:_,className:"text-white hover:bg-white/20 h-8 w-8 p-0"},u.createElement(d.X,{className:"h-4 w-4"}))),u.createElement(j,{className:"flex-1 p-4 h-53"},u.createElement("div",{className:"space-y-4"},P.map(function(e){return u.createElement("div",{key:e.id,className:v("flex gap-2","user"===e.role?"justify-end":"justify-start")},"bot"===e.role&&u.createElement(h,{className:"h-6 w-6 mt-1"},u.createElement(p,{className:"bg-muted"},u.createElement(d.Bot,{className:"h-3 w-3"}))),u.createElement("div",{className:v("max-w-[70%] rounded-lg px-3 py-2 text-sm","user"===e.role?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground")},e.content),"user"===e.role&&u.createElement(h,{className:"h-6 w-6 mt-1"},u.createElement(p,{className:"bg-primary"},u.createElement(d.User,{className:"h-3 w-3 text-primary-foreground"}))))}),V&&u.createElement("div",{className:"flex gap-2 justify-start"},u.createElement(h,{className:"h-6 w-6 mt-1"},u.createElement(p,{className:"bg-muted"},u.createElement(d.Bot,{className:"h-3 w-3"}))),u.createElement("div",{className:"bg-muted rounded-lg px-3 py-2"},u.createElement("div",{className:"flex gap-1"},u.createElement("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),u.createElement("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),u.createElement("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})))),u.createElement("div",{ref:B}))),u.createElement("div",{className:"p-4 border-t"},u.createElement("div",{className:"flex gap-2"},u.createElement(C,{ref:T,value:M,onChange:function(e){return U(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),F())},placeholder:s,className:"flex-1"}),u.createElement(N,{onClick:F,size:"sm",disabled:!M.trim(),style:{backgroundColor:m}},u.createElement(d.Send,{className:"h-4 w-4"})))))))},e.useChatbot=function(){var e=a.useState([]),n=e[0],s=e[1],i=t.useMutation({mutationFn:function(e){try{return Promise.resolve(r.post("/api/chatbot",{message:e})).then(function(e){return e.data})}catch(e){return Promise.reject(e)}},onSuccess:function(e,t){s(function(e){return[].concat(e,[{id:crypto.randomUUID(),sender:"user",text:t}])}),s(function(r){return[].concat(r,[{id:crypto.randomUUID(),sender:"user",text:t},{id:crypto.randomUUID(),sender:"bot",text:e.reply}])})}});return{messages:n,sendMessage:function(e){e.trim()&&i.mutate(e)},isLoading:i.isPending}}});
//# sourceMappingURL=index.umd.js.map
